<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
     xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
     layout:decorate="~{layouts/userDefault}">     

<th:block layout:fragment="customCss">
	<!-- Alert2 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.2.0/sweetalert2.min.css">
</th:block>

<!-- ì‚¬ìš©ì ì •ì˜ JsScript íŒŒì¼-->
<th:block layout:fragment="customJsScript">
   <!-- ì£¼ì†Œê²€ìƒ‰ API -->
   <script th:src="@{//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js}"></script>
   <!-- Alert2 -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.2.0/sweetalert2.all.min.js"></script>
</th:block>

<th:block layout:fragment="customJsScript2">
 <script type="text/javascript">
 	$(document).ready(function(){
		
		$(document).on('click','#removeBtn', function(){
			
			if($("#memberPw").val() == ""){
				//alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
				 swal(
				        'â˜¹ï¸ë¹„ë°€ë²ˆí˜¸â—',
				        'íƒˆí‡´ ì „ <b style="color:Red;">ë¹„ë°€ë²ˆí˜¸</b>ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”!',
				        'error'
				      ).then(()=>{				    	  
						$("#memberPw").focus();
				      });
				
				return false;
			}
			swal({
		        title: 'ğŸ˜¦ì •ë§ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
		        showCancelButton: true,
		        confirmButtonText: 'íƒˆí‡´',
		        showLoaderOnConfirm: true,
		        allowOutsideClick: false
		      }).then((result) => {
		        if (result.value) {
		    	  	var request = $.ajax({
					  url: "/user/removeMember",
					  method: "POST",
					  data: $('#removeForm').serialize(), 
					  dataType: "json"
					});
					 
					request.done(function( data ) { //true ì¼ ë•Œ ì‹¤í–‰
						console.log(data);
						let result = data.result;
						if(result == 1){
				          swal({
				            type: 'success',
				            title: 'ğŸ™‚ì´ìš©í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.',
				          }).then(() => { 
				        	  location.href = data.movePage;			        	  
				          });
						}
						else if(result == 3){
				          swal({
				            type: 'error',
				            title: 'â˜¹ï¸íšŒì›ì˜ ì •ë³´ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.â—',
				          }).then(()=>{
				        	  location.href = data.movePage;
				          });
						} else if(result == 2) {
							swal({
					            type: 'error',
					            title: 'â˜¹ï¸íƒˆí‡´ ëŒ€ê¸° ìƒíƒœì…ë‹ˆë‹¤.â—',
					        }).then(()=>{
					        	  location.href = data.movePage;
					        });
						}
						
					});
					request.fail(function( jqXHR, textStatus ) {
					  alert( "Request failed: " + textStatus );
					});
		        }
		      });
			})
		});
   </script>
 </th:block>

<style>
     min-height: 100vh;

    .input-form {
      max-width: 800px;

      margin-top: 100px;
      margin-bottom: 100px;
      padding: 32px;

      background: #fff;
      -webkit-border-radius: 10px;
      -moz-border-radius: 10px;
      border-radius: 10px;
      -webkit-box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15);
      -moz-box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15);
      box-shadow: 0 8px 20px 0 rgba(0, 0, 0, 0.15);
    }
    textarea {
      position: relative;
      overflow: auto;
      height: 100px;
      border: 1px solid #dadada;
      box-sizing: border-box;
   }
</style>
</th:block>

<!-- ì‚¬ìš©ìì •ì˜ contents -->
<th:block layout:fragment="customContents">
   <!-- ê²Œì‹œíŒ íƒ€ì´í‹€ -->
   <div id="container">
      <div id="top-loca">
         <div class="boardPath">
            <a th:href="@{/}">HOME</a>           
            <h2 style="font-family: 'ONE-Mobile-Regular'">[[${sessionName}]]</h2><span>ë‹˜ì˜ ë§ˆì´í˜ì´ì§€</span>
         </div>   
      </div>
   </div>   
      
   <!-- ê²Œì‹œíŒ íƒ­  -->         
   <div class="list-group list-group-horizontal col-sm-12" style="margin:0 auto; text-align: center;padding-right: 0px;">
        <a th:href="@{/user/myPage}" class="list-group-item list-group-item-action active" style="background-color: #F28123; border-color: #F28123;" aria-current="true">
        	íšŒì›ì •ë³´
        </a>
      <a th:href="@{/user/myPageReservationStatus}" class="list-group-item list-group-item-action">ì˜ˆì•½ í˜„í™©</a>
      <a href="#" class="list-group-item list-group-item-action">ìˆ˜ê±°ë°°ì†¡ ì¡°íšŒ</a>
      <a th:href="@{/user/myPagePayment}" class="list-group-item list-group-item-action">ê²°ì œ ë‚´ì—­</a>
      <a href="#" class="list-group-item list-group-item-action">í™˜ë¶ˆ ë‚´ì—­</a>
      <a th:href="@{/user/myPagePoint}" class="list-group-item list-group-item-action">í¬ì¸íŠ¸ ì¡°íšŒ</a>
      <a th:href="@{/user/myPageWrite}" class="list-group-item list-group-item-action">ë‚´ê°€ ì“´ ê¸€</a>
      <a href="#" class="list-group-item list-group-item-action">ë¦¬ë·°?</a>
   </div>
   
   <!-- ê³µì§€ì‚¬í•­ í…Œì´ë¸” -->
   <div class="cart-section mt-150 mb-150" style="background-color: #f5f6fa; padding: 60px 0 100px; margin: 0; border-top: #e5e5e5 1px solid;">
      <div class="container">
         <div class="row" style="float: none; margin: 100 auto;">
            <div class="col-lg-8 col-lg-12" style="float: none; margin:0 auto;">
            <form id="removeForm" th:action="@{/user/removeMember}" method="post" class="validation-form" novalidate>
		        <div class="container"  style="margin-top: 150px; margin-bottom: 200px;">
		          <div class="input-form-backgroud row">
		            <div class="input-form col-md-12 mx-auto" >
		            
		            		<h4 class="mb-3">ğŸ“¢íƒˆí‡´ ëŒ€ê¸° ì‚¬ìœ </h4>
           						<div id="cid_1" class="form-input-wide" data-layout="full">
                  					<div data-component="separator" style="border-top:1px solid rgb(0,0,0); clear:both;"></div>
           						</div>
             					<div class="point-summary" style="border: 1px solid #dadddf; padding: 30px 0 30px; margin-bottom: 5%;">
									<div class="mb-3" style="margin: 0 auto;"> 
										<div>
											<p class="form-control" style="width:500px; height:100px;"/>												
										</div>
									</div>	
								</div>		
             						
             					<h4 class="mb-3">íšŒì› ì •ë³´ í™•ì¸</h4>
             						<div id="cid_1" class="form-input-wide" data-layout="full">
                    					<div data-component="separator" style="border-top:1px solid rgb(0,0,0); clear:both;"></div>
             						</div>
             						<div class="point-summary" style="border: 1px solid #dadddf; padding: 30px 0 30px;">
             						
										<div class="mb-3"  style="margin: 20px auto;"> 
											<label for="id"><strong>ì•„ì´ë””</strong></label> 
											<div style="display: flex;">
												<input type="text" class="form-control" id="memberId" name="memberId" th:value="${session.SID}"/>						
												<input type="hidden" class="form-control" id="levelCode" name="levelCode" th:value="${session.SLEVEL}"/>						
											</div>
										</div>				
											<div class="mb-3" style="margin: 20px auto;">
												<label for="password" style="display: block;"><strong>ë¹„ë°€ë²ˆí˜¸</strong></label>
												<input class="form-control" type="password" id="memberPw" name="memberPw" 
												    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,}" 
													title="Minimum 8 Characters Including An Upper And Lower Case Letter, A Number And A Unique Character" required style="display: inline;"/>	
											</div>
										
											<div class="mb-3" style="margin: 20px auto;">
												<label for="memberOutReason" style="display: block;"><strong>íƒˆí‡´ì‚¬ìœ </strong></label>
											</div>
												<select id="memberOutReason" name="memberOutReason" class="form-control text-center" style="width: 50%; margin: 20px auto;">
														<option> :: ì„  íƒ :: </option>
														<option  value="ë§ˆìŒì— ë“¤ì§€ ì•Šì•„ì„œ">ë§ˆìŒì— ë“¤ì§€ ì•Šì•„ì„œ</option>
														<option  value="ì„œë¹„ìŠ¤ ë¶ˆë§Œ">ì„œë¹„ìŠ¤ ë¶ˆë§Œ</option>
														<option  value="ì´ìš© ë¶ˆí¸">ì´ìš© ë¶ˆí¸</option>
														<option  value="ìì£¼ ì´ìš©í•˜ì§€ ì•ŠìŒ">ìì£¼ ì´ìš©í•˜ì§€ ì•ŠìŒ</option>
														<option  value="ê¸°íƒ€">ê¸°íƒ€</option>
												</select>		
											</div>
									</div>
									<div class="mb-3" style="margin: 40px auto; text-align: center;">
										<button type="button" id="removeBtn" class="btn btn-secondary btn-xs" style="width: 30%;"> íšŒì› íƒˆí‡´í•˜ê¸° </button>
									</div>		
								</div>
								<div th:if="${not #strings.isEmpty(result)}">
									<p th:text="${result}"></p>
								</div>		 	
							</div>
						 </form>
						</div>				
					</div>				
				</div>				
			</div>			

   </th:block>
</html>

  