<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/adminDefault}">
	 
	<th:block layout:fragment="customScript">
		<script type="text/javascript" th:src="@{/js/jquery-3.6.0.min.js}"></script>
	</th:block>	
		
	<th:block layout:fragment="customJsScript"> 
		<script type="text/javascript">
		
		/*Data Table*/
		$(document).ready(function () {
		    $(.table).DataTable({
		    	stateSave: true,
		    	destroy : true,
		    	ordering: false,
		    	order: [ [ 1, "asc" ] ],
		    	autowidth: false
		    });
		});
		</script>
		<style>
			
			table.dataTable {
				border-collapse: collapse !important;
				width: 100%;
			}			
			.table-striped td{
				vertical-align: middle;
			}
			.table-striped tr{
				text-align: center;
			}			
		</style>
	</th:block>	

	  
	<!-- 사용자정의 contents -->
	<th:block layout:fragment="customContents">
	
		<!-- 탭 이름 -->
		<h4><strong>고장 신고</strong></h4>
			<!-- 본문 내용 시작 -->
			<div class="container" style="margin-top: 50px;">
				<div class="col-md-12 col-sm-12">
					<div class="x_panel">
						<!-- 게시판 타이틀 -->
						<h4 style="margin: 20px;"><strong>[[${sessionName}]]</strong><span> 님의 고장 신고 내역
							<th:block th:each="l : ${getMemberLaundryList}">
				 				<span th:text="[+${l.laundryName}+]" style="margin: 20px; font-size: 15px;"></span>
				 			</th:block>
			 			</span></h4>
			 				
							
							<div class="x_title">
								<div class="x_content"> 			
									<div class="col-sm-12" style="margin-top: 50px;">
										<table id="datatable-fixed-header" class="table table-striped table-bordered" style="width: 100%;">
											<thead>
												<tr>
													<th style="width: 5%;">번호</th>
													<th style="width: 7%;">진행상태</th>	
													<th style="width: 17%;">세탁소명</th>	
													<th style="width: 27%;">제목</th>
													<th style="width: 6%;">첨부</th>
													<th style="width: 8%;">작성자</th>
													<th style="width: 15%;">작성일</th>					
													<th style="width: 15%;">방문(예정)일</th>						
												</tr>
											</thead>
											<tbody>										
											<th:block th:if="${not #lists.isEmpty(asListById)}" th:each="l, status : ${asListById}">
												<tr th:if="${not #lists.isEmpty(l.LaundryList)}" th:each="sl :${l.LaundryList}">				
													<td th:text="${asListByIdCount-status.count+1}"></td> <!-- status.count -->
													<td th:text="${l.asState}"></td>
													<td th:text="${sl.laundryName}"></td>
													<td style="text-align: left;">
														<strong><a th:href="@{/admin/asDetail(asCode=${l.asCode})}"th:text="${l.asTitle}"></a></strong>
													</td>
													<td>
														<th:block th:if="${l.asAddFile=='1'}">
															<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
															  <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"/>
															</svg>
														</th:block>
														<th:block th:unless="${l.asAddFile=='1'}">
														</th:block>
													</td>
													<td th:text="${l.memberId}"></td>
													<td th:text="${l.registTime}"></td>					
													<td th:text="${l.visitTime}"></td>					
												</tr>
												<tr th:unless="${not #lists.isEmpty(asListById)}">
													<td colspan="8">조회된 내용이 없습니다.</td>
												</tr>
											</th:block>
										</tbody>
									</table>
								</div>
								
								<!-- 버튼 -->	
								<div style="text-align: center; margin-top: 100px;">
									<a th:href="@{/admin/asForm}" class="btn btn-secondary" style="margin: 30px;">신고하기</a>
								</div>
							</div>
		
				</div>
			</div>
		</div>
	</div>	
</th:block>

</html>