<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/adminDefault}">
	 
	<th:block layout:fragment="customScript">
		<script type="text/javascript" th:src="@{/js/jquery-3.6.0.min.js}"></script>
	</th:block>	
		
	<th:block layout:fragment="customJsScript"> 
		<script type="text/javascript">
		
		<!-- 새로고침 후 탭 유지 -->
		$(document).ready(function() {
		    if (location.hash) {
		        $("a[href='" + location.hash + "']").tab("show");
		    }
		    $(document.body).on("click", "a[data-toggle='tab']", function(event) {
		        location.hash = this.getAttribute("href");
		    });
		});
		$(window).on("popstate", function() {
		    var anchor = location.hash || $("a[data-toggle='tab']").first().attr("href");
		    $("a[href='" + anchor + "']").tab("show");
		});
		
		/*Data Table*/
		$(document).ready(function () {
		    $('#datatable-fixed-header').DataTable({
		    	stateSave: true,
		    	destroy : true,
		    	ordering: false,
		    	order: [ [ 1, "asc" ] ],
		    	autowidth: false
		    });
		});
		</script>
		
				<style>
			ul.bar_tabs {
				background: none;
				margin-top: 50px !important;
			}
			table.dataTable {
				border-collapse: collapse !important;
				width: 100%;
			}			
			.table-striped td{
				vertical-align: middle;
			}
			.table-striped tr{
				text-align: center;
			}			
		</style>
	</th:block>		
	  
	  
	<!-- 사용자정의 contents -->
	<th:block layout:fragment="customContents">
	
		<!-- 탭 이름 -->
		<h4><strong>문의사항 관리</strong></h4>
			<!-- 본문 내용 시작 -->
			<div class="container" style="margin-top: 50px;">
				<div class="col-md-12 col-sm-12">
					<div class="x_panel">
						<!-- 게시판 타이틀 -->
			 			<h4 style="margin: 20px;">고장 신고</h4>
							<div class="x_title">	
							 	
							<!-- 탭 -->		
							<div class="x_content">
								<ul class="nav nav-tabs bar_tabs" id="myTab" role="tablist">
									<li class="nav-item">
										<a class="nav-link active" id="home-tab" data-toggle="tab" href="#total" role="tab" aria-controls="home" aria-selected="true">전체</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" id="profile-tab" data-toggle="tab" href="#wait" role="tab" aria-controls="profile" aria-selected="false">대기</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" id="contact-tab" data-toggle="tab" href="#ready" role="tab" aria-controls="contact" aria-selected="false">접수</a>
									</li>
									<li class="nav-item">
										<a class="nav-link" id="contact-tab2" data-toggle="tab" href="#end" role="tab" aria-controls="contact2" aria-selected="false">완료</a>
									</li>
								</ul>
								
							<!-- (1)전체 -->			
							<div class="tab-content" id="myTabContent">
								<div class="tab-pane fade active show" id="total" role="tabpanel" aria-labelledby="home-tab">
									<table id="datatable-fixed-header" class="table table-striped table-bordered" style="width: 100%;">
										<thead>
											<tr>
												<th style="width: 5%;">번호</th>
												<th style="width: 7%;">진행상태</th>	
												<th style="width: 17%;">세탁소명</th>	
												<th style="width: 27%;">제목</th>
												<th style="width: 6%;">첨부</th>
												<th style="width: 8%;">작성자</th>
												<th style="width: 15%;">작성일</th>					
												<th style="width: 15%;">방문(예정)일</th>					
											</tr>
										</thead>
										<tbody>
										<th:block th:if="${not #lists.isEmpty(asList)}" th:each="l : ${asList}">
											<tr th:if="${not #lists.isEmpty(l.LaundryList)}" th:each="sl, status :${l.LaundryList}">
												<td th:text="${l.asNumber}"></td> <!-- status.count -->
												<td th:text="${l.asState}"></td>
												<td th:text="${sl.laundryName}"></td>
												<td style="text-align: left;">
													<strong><a th:href="@{/admin/asDetail(asCode=${l.asCode})}" th:text="${l.asTitle}"></a></strong>
												</td>
												<td>
													<th:block th:if="${l.asAddFile=='1'}">
														<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
														  <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"/>
														</svg>
													</th:block>
													<th:block th:unless="${l.asAddFile=='1'}">
													</th:block>
												</td>
												<td th:text="${sl.memberId}"></td>
												<td th:text="${l.registTime}"></td>					
												<td th:text="${l.visitTime}"></td>					
											</tr>
											<tr th:unless="${not #lists.isEmpty(asList)}">
												<td colspan="8">조회된 내용이 없습니다.</td>
											</tr>
										</th:block>
									</tbody>
								</table>
							</div>
							
							<!-- (2)대기 -->			
							<div class="tab-pane fade" id="wait" role="tabpanel" aria-labelledby="profile-tab">
								<table id="datatable-fixed-header" class="table table-striped table-bordered" style="width: 100%;">
									<thead>
										<tr>
											<th style="width: 5%;">번호</th>
											<th style="width: 7%;">진행상태</th>	
											<th style="width: 17%;">세탁소명</th>	
											<th style="width: 27%;">제목</th>
											<th style="width: 6%;">첨부</th>
											<th style="width: 8%;">작성자</th>
											<th style="width: 15%;">작성일</th>					
											<th style="width: 15%;">방문(예정)일</th>						
										</tr>
									</thead>
									<tbody>
									<th:block th:if="${not #lists.isEmpty(readyAsList)}" th:each="l : ${readyAsList}">
										<tr th:if="${not #lists.isEmpty(l.LaundryList)}" th:each="sl, status :${l.LaundryList}">
											<td th:text="${l.asNumber}"></td> <!-- status.count -->
											<td th:text="${l.asState}"></td>
											<td th:text="${sl.laundryName}"></td>
											<td style="text-align: left;">
											<strong><a th:href="@{/admin/asDetail(asCode=${l.asCode})}" th:text="${l.asTitle}"></a></strong>
											</td>
											<td>
												<th:block th:if="${l.asAddFile=='1'}">
													<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
													  <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"/>
													</svg>
												</th:block>
												<th:block th:unless="${l.asAddFile=='1'}">
												</th:block>
											</td>
											<td th:text="${sl.memberId}"></td>
											<td th:text="${l.registTime}"></td>					
											<td th:text="${l.visitTime}"></td>					
										</tr>
										<tr th:unless="${not #lists.isEmpty(readyAsList)}">
											<td colspan="8">조회된 내용이 없습니다.</td>
										</tr>
									</th:block>
								</tbody>
							</table>
						</div>
			
						<!-- (3)접수 -->			
						<div class="tab-pane fade" id="ready" role="tabpanel" aria-labelledby="contact-tab">
							<table id="datatable-fixed-header" class="table table-striped table-bordered" style="width: 100%;">
								<thead>
									<tr>
										<th style="width: 5%;">번호</th>
										<th style="width: 7%;">진행상태</th>	
										<th style="width: 17%;">세탁소명</th>	
										<th style="width: 27%;">제목</th>
										<th style="width: 6%;">첨부</th>
										<th style="width: 8%;">작성자</th>
										<th style="width: 15%;">작성일</th>					
										<th style="width: 15%;">방문(예정)일</th>					
									</tr>
								</thead>
								<tbody>
								<th:block th:if="${not #lists.isEmpty(startAsList)}" th:each="l : ${startAsList}">
									<tr th:if="${not #lists.isEmpty(l.LaundryList)}" th:each="sl, status :${l.LaundryList}">
										<td th:text="${l.asNumber}"></td> <!-- status.count -->
										<td th:text="${l.asState}"></td>
										<td th:text="${sl.laundryName}"></td>
										<td style="text-align: left;">
											<strong><a th:href="@{/admin/asDetail(asCode=${l.asCode})}" th:text="${l.asTitle}"></a></strong>
										</td>
										<td>
											<th:block th:if="${l.asAddFile=='1'}">
												<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
												  <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"/>
												</svg>
											</th:block>
											<th:block th:unless="${l.asAddFile=='1'}">
											</th:block>
										</td>
										<td th:text="${sl.memberId}"></td>
										<td th:text="${l.registTime}"></td>					
										<td th:text="${l.visitTime}"></td>					
									</tr>
									<tr th:unless="${not #lists.isEmpty(startAsList)}">
										<td colspan="8">조회된 내용이 없습니다.</td>
									</tr>
								</th:block>
							</tbody>
						</table>
					</div>
			
					<!-- (4)완료 -->				
					<div class="tab-pane fade" id="end" role="tabpanel" aria-labelledby="contact-tab2">
						<table id="datatable-fixed-header" class="table table-striped table-bordered" style="width: 100%;">
							<thead>
								<tr>
									<th style="width: 5%;">번호</th>
									<th style="width: 7%;">진행상태</th>	
									<th style="width: 17%;">세탁소명</th>	
									<th style="width: 27%;">제목</th>
									<th style="width: 6%;">첨부</th>
									<th style="width: 8%;">작성자</th>
									<th style="width: 15%;">작성일</th>					
									<th style="width: 15%;">방문(예정)일</th>						
								</tr>
							</thead>
							<tbody>
							<th:block th:if="${not #lists.isEmpty(endAsList)}" th:each="l : ${endAsList}">
								<tr th:if="${not #lists.isEmpty(l.LaundryList)}" th:each="sl, status :${l.LaundryList}">
									<td th:text="${l.asNumber}"></td> <!-- status.count -->
									<td th:text="${l.asState}"></td>
									<td th:text="${sl.laundryName}"></td>
									<td style="text-align: left;">
										<strong><a th:href="@{/admin/asDetail(asCode=${l.asCode})}" th:text="${l.asTitle}"></a></strong>
									</td>
									<td>
										<th:block th:if="${l.asAddFile=='1'}">
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-paperclip" viewBox="0 0 16 16">
											  <path d="M4.5 3a2.5 2.5 0 0 1 5 0v9a1.5 1.5 0 0 1-3 0V5a.5.5 0 0 1 1 0v7a.5.5 0 0 0 1 0V3a1.5 1.5 0 1 0-3 0v9a2.5 2.5 0 0 0 5 0V5a.5.5 0 0 1 1 0v7a3.5 3.5 0 1 1-7 0V3z"/>
											</svg>
										</th:block>
										<th:block th:unless="${l.asAddFile=='1'}">
										</th:block>
									</td>
									<td th:text="${sl.memberId}"></td>
									<td th:text="${l.registTime}"></td>					
									<td th:text="${l.visitTime}"></td>					
								</tr>
								<tr th:unless="${not #lists.isEmpty(endAsList)}">
									<td colspan="8">조회된 내용이 없습니다.</td>
								</tr>
									</th:block>
								</tbody>
						</table>
					</div>
				</div>
			</div>
	
					</div>
				</div>
			</div>
		</div>

	</th:block>

</html>