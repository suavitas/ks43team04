<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/adminDefault}">


<!-- 사용자정의 contents -->
<th:block layout:fragment="customContents">
	<table  class="table table-striped table-bordered">
		<tbody>
			<tr>
				<th>매출 합계<th>
				<th id="finalMoney" style="color: red"><th>
			</tr>
		</tbody>
	</table>
	
	<table id="laundryIncome" class="table table-striped table-bordered"
		style="width: 100%; white-space: nowrap;">
		<thead>
			<tr>
				<th>세탁소명</th>
				<th>회원 아이디</th>
				<th>회원 이름</th>
				<th>결제 금액</th>
				<th>결제 날짜</th>

			</tr>
		</thead>
		<tbody id="tBody">
			<tr th:if="${not #lists.isEmpty(laundryIncome)}"
				th:each="l : ${laundryIncome}">
				<td th:text="${l.laundryName}"></td>
				<td th:text="${l.memberId}"></td>
				<td th:text="${l.memberName}"></td>
				<td class="money"
					th:text="${#numbers.formatInteger(l.totalPrice,3,'COMMA')+'원'}"></td>
				<td th:text="${l.payOkDate}"></td>
			<tr th:unless="${not #lists.isEmpty(laundryIncome)}">
				<td colspan="5">조회된 내용이 없습니다.</td>
			</tr>
		</tbody>
	</table>
</th:block>

<th:block layout:fragment="customJsScript">
	<script type="text/javascript">
      var tBody = document.querySelector('#tBody');
      var finalMoney = document.querySelector('#finalMoney');
      var money = tBody.querySelectorAll('.money');
   
      var sum = 0;
      for(var i=0; i<money.length; i++){
        mm = money[i].innerText.split('원', 1);
        var number = mm[0].replace(",", "");
        sum += Number(number);
      }
      console.log(sum);
      finalMoney.innerText = sum+"원";
   </script>
</th:block>
</html>