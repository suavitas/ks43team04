<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/adminDefault}">
	 
		<th:block layout:fragment="customJsScript">  
		<script type="text/javascript">
		
		/*유효성 검사*/
		function delCheck(){
			 
			var pwDelCheck = document.getElementById("pwDelCheck");
			var pwDelCheck2 = document.getElementById("pwDelCheck2");
			
			if(pwDelCheck.value == ""){
				alert("비밀번호를 입력하세요.")
				pwDelCheck.focus();
				return false;
			}
			else if(pwDelCheck.value !== pwDelCheck2.value){
					alert("비밀번호를 확인하세요.")
					pwDelCheck.focus();
					return false;
					
			}
			return true;				 
		}
				
		</script>
	</th:block> 	  	
	  
	<!-- 사용자정의 contents -->
	<th:block layout:fragment="customContents">
	
	<style>
		.x_title span {
			color: #212529;
		}
		.x_content{
			margin-top: 60px;
		}
		.table-bordered {
			margin: 20px 100px;
		}
		.table-bordered th{
			vertical-align: middle;
		}
		.pt img{
			width: 350px; margin-bottom: 50px;
		}
		.btnChange{
			margin: 0 100px; padding: 0; text-align: left;
		}
		.btnChange .btn{
			margin:10px 30px 30px 0;
		}
	</style>
	
 	<!-- 삭제 Modal 시작 -->
	<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="staticBackdropLabel">정말로 삭제하시겠습니까?</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
				</div>
				<form class="eventRemove" th:action="@{/admin/eventList}"  method="POST">
					<div class="modal-body">		      	  
			        	 <div style="text-align: center">
							<h5>비밀번호 확인</h5>
							<input type="password" id ="pwDelCheck" name="pwDelCheck" placeholder="비밀번호를 입력해주세요" required="required">
							<input type="hidden" id ="pwDelCheck2" name="memberPw2" th:value="${member.memberPw}">
						</div>
		      			<input type="hidden" name="eventCode" th:value="${event.eventCode}">
		      		</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">취소</button>									
							<a th:href="@{/admin/eventList}"><button type="submit" name="submit" value="submit" class="btn btn-danger" onclick="return delCheck()">삭제</button></a>
					</div>
				</form>
			</div>
		</div>
	</div>
	<!-- 삭제 Modal 끝 -->	 		


		<!-- 탭 이름 -->
		<h4><strong>이벤트 관리</strong></h4>	
			<!-- 본문 --> 	
				<div class="container" style="margin-top: 50px;">
					<div class="x_panel">
		 				<!-- 게시판 타이틀 -->
		 				<h4 style="margin: 20px;">이벤트 상세 조회</h4>
				 			<div class="x_title">		
								<!--상세 보기 -->	
								<div class="x_content">
									<div class="col-md-9" style="margin: 0 100px; padding: 0;">
										<a th:href="@{/admin/eventList}" class="btn btn-secondary" style="float: right;">목록보기</a>		
									</div>
									<table class="table table-bordered col-md-9">		
										<tbody>
											<tr>
												<th scope="row" style="width:20%;">진행상태</th>
												<td colspan="4"><span th:text="${event.eventState}"></span></td>
											 </tr>											
											<tr>
												<th scope="row">작성자</th>
												<td th:if="${event.memberId.equals('id001')}"><span>관리자</span></td>
												<th scope="row" style="width:20%;">작성시간</th>
												<td style="width:30%;"><span th:text="${event.registTime}"></span></td>
											</tr>
											<tr>
												<th scope="row">첨부파일</th>
												<td>
													<th:block th:if="${not #lists.isEmpty(event.boardAttach)}" th:each="b : ${event.boardAttach}">
														<a th:href="@{/admin/fileDown(fileIdx=${b.fileIdx})}"><span th:text="${b.saveFile}"></span></a><br>
													</th:block>
												</td>
												<th scope="row">조회수</th>
												<td th:text="${event.eventReadCount}"></td>
											</tr>
											<tr>
											 <th scope="row">제목</th>
												 <td colspan="3"><span th:text="${event.eventTitle}"></span></td>	
											 </tr>
											<tr>
											<tr>
												<th scope="row" style="height: 300px;">내용</th>
												<td colspan="3">
													<!-- 이미지 보기 시작 -->
													<th:block th:if="${not #lists.isEmpty(event.boardAttach)}" th:each="b : ${event.boardAttach}">									
														<a class="pt" th:data-img="${b.saveFile}">
															<img th:src="@{'/' + ${#strings.replace(b.filePath,'\','/')}}" alt="이미지를 불러올 수 없습니다.">
														</a>
													</th:block>
													<th:block th:unless="${not #lists.isEmpty(event.boardAttach)}">
													</th:block>
													<!-- 이미지 보기 끝 -->
												 	<p th:text="${event.eventContent}"></p>
												 </td>
											</tr>
										</tbody>
									</table>
								</div>
								<!-- 버튼 -->			
								<div class="btnChange col-md-9">
									<a th:href="@{/admin/eventModify(eventCode=${event.eventCode},memberId=${event.memberId}, eventTitle=${event.eventTitle}, eventContent=${event.eventContent})}">
										<button type="button" class="btn btn-warning">수정</button>
									</a>
									<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#staticBackdrop">삭제</button>
								</div>
							</div>
						</div>
					</div>

	
			</th:block>

</html>