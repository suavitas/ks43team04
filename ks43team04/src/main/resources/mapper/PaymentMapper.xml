<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ks43team04.mapper.PaymentMapper">
   
   <resultMap type="PayMember" 					id="payMInfoResultMap">
		<id column="m_id" 						property="memberId"/>
		<result column="level_code" 			property="levelCode"/>
		<result column="m_pw" 					property="memberPw"/>
		<result column="m_pw_QnA_code" 			property="memberPwQnACode"/>
		<result column="m_name" 				property="memberName"/>
		<result column="m_birth" 				property="memberBirth"/>
		<result column="m_post_num" 			property="memberPostNum"/>
		<result column="m_addr" 				property="memberAddr"/>
		<result column="m_detail_addr" 			property="memberDetailAddr"/>
		<result column="m_phone" 				property="memberPhone"/>
		<result column="m_gender" 				property="memberGender"/>
		<result column="m_out_code" 			property="memberOutCode"/>
		<result column="m_email" 				property="memberEmail"/>
		<result column="m_reg_date" 			property="memberRegDate"/>
		<result column="admin_level_code" 		property="adminLevelCode"/>
		<result column="regist_time" 			property="registTime"/>
	</resultMap>
	
	
	<resultMap type="MemberLevel" id="PayMemberLevel">
		<id column="l_level_code"				property="levelCode"/>
		<result column="level_name" 			property="levelName"/>
		<result column="admin_level_code" 		property="adminLevelCode"/>
		<result column="regist_time" 			property="registTime"/>
	</resultMap>
   
   
   
<select id="getPayMInfo" parameterType="String" resultMap="payMInfoResultMap">
		/* 회원별 회원 정보조회*/
		SELECT
		     m.m_id
		    ,m.m_pw
		    ,m.level_code
			,m.m_name
			,m.m_birth
			,m.m_post_num
			,m.m_addr
			,m.m_detail_addr
			,m.m_phone
			,m.m_gender
			,m.m_email
			,m.m_reg_date
		FROM
		   tb_member AS m
		WHERE
		   m.m_id = #{memberId};
	</select>
	<select id="getMemberLevel" parameterType="String" resultMap="PayMemberLevel">
		/* 회원 권한명 가져오기*/
		SELECT 
			 l.level_code
			,l.level_name
			,l.admin_level_code
			,l.regist_time	
		FROM 
			tb_member_level as l
		WHERE			
			l.level_code = #{levelCode};
	</select>
</mapper>